<% visible_comments = post.comments.where(public: true).or(post.comments.where(author: current_user)) %>
<% if visible_comments.each do |comment| %>
  <p>
    <b>
      <%= comment.author == current_user ? 'You' : comment.author.first_name %>
      <%= comment.public? ? '(publically)' : '(privately)' %>
      on
      <%= comment.created_at.strftime('%d %b %Y') %>:
    </b>
    <br>
    <%= comment.text %>
  </p>
<% end.empty? %>
  <p>None yet; be the first to leave a comment!</p>
<% end %>
