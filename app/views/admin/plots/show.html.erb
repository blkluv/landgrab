<h1><%= admin_title @plot %></h1>

<table class="table">
  <tbody>
    <tr>
      <th>Title</th>
      <td><%= @plot.title %></td>
    </tr>
    <tr>
      <th>Project</th>
      <td>
        <% if @plot.project.present? %>
          <%= link_to @plot.project.title, admin_project_path(@plot.project) %>
        <% else %>
          None; plot is not associated with a project
        <% end %>
      </td>
    </tr>
    <tr>
      <th>Polygon</th>
      <td><%= @plot.coordinates_display %></td>
    </tr>
    <tr>
      <th>Area</th>
      <td>
        ~ <%= @plot.area_formatted_unsquared %><sup>2</sup>
        or
        <%= @plot.area_formatted_acres %>
      </td>
    </tr>
    <!--
    <tr>
      <th>Overlaps</th>
      <td>
        <%# @plot.overlapping_polygons.each do |other_plot| %>
          <%#= link_to other_plot.title, admin_plot_path(other_plot) %>
        <%# end %>
      </td>
    </tr>
    -->
    <tr>
      <th>Blocks</th>
      <td>
        <%= @plot.blocks.left_outer_joins(:subscription).where(subscriptions: { id: nil }).size %>
        available out of
        <%= @plot.blocks.size %>
        <% if @plot.blocks.size.positive? %>
          - <%= link_to 'view on map', blocks_path(plot: @plot) %>
        <% end %>
      </td>
    </tr>
    <tr>
      <th>Created</th>
      <td>
        <%= @plot.created_at.strftime('%e %b %Y %H:%M:%S') %>
      </td>
    </tr>
  </tbody>
</table>

<p>
  <%= link_to 'Edit plot', edit_admin_plot_path(@plot) %>
</p>

<%= render 'admin/plots/map', plot: @plot %>
